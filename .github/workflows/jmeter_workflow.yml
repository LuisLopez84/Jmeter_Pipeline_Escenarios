name: Ejecutar JMeter en Windows
 
on:
  workflow_dispatch:  # Permite ejecuciÃ³n manual
 
jobs:
  run-jmeter-windows:
    runs-on: windows-latest
 
    steps:
    - name: Checkout del repositorio
      uses: actions/checkout@v3
 
    - name: Descargar Apache JMeter
      run: |
        curl -LO https://downloads.apache.org/jmeter/binaries/apache-jmeter-5.6.3.zip
        tar -xf apache-jmeter-5.6.3.zip
        echo "JMETER_HOME=$(pwd)\\apache-jmeter-5.5\\bin" >> $env:GITHUB_ENV
 
    - name: Agregar JMeter al PATH
      run: echo "$env:JMETER_HOME" | Out-File -Append -FilePath $env:GITHUB_PATH -Encoding utf8
 
    - name: Ejecutar BAT_PRUEBA.bat
      run: .\BAT_PRUEBA.bat . 1 5
      shell: cmd
 
    - name: Subir reportes como artefactos
      uses: actions/upload-artifact@v4
      with:
        name: reportes-jmeter-windows
        path: Escenario*/Dashboard
